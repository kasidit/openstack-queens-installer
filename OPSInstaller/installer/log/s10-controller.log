+ cd /home/openstack/OPSInstaller/controller
+ pwd
/home/openstack/OPSInstaller/controller
+ echo 'Run this script as a user.'
Run this script as a user.
+ echo -n 'Create Identity service and endpoint...'
Create Identity service and endpoint...+ export OS_USERNAME=admin
+ OS_USERNAME=admin
+ export OS_PASSWORD=adminpassword
+ OS_PASSWORD=adminpassword
+ export OS_PROJECT_NAME=admin
+ OS_PROJECT_NAME=admin
+ export OS_USER_DOMAIN_NAME=Default
+ OS_USER_DOMAIN_NAME=Default
+ export OS_PROJECT_DOMAIN_NAME=Default
+ OS_PROJECT_DOMAIN_NAME=Default
+ export OS_AUTH_URL=http://controller:5000/v3
+ OS_AUTH_URL=http://controller:5000/v3
+ export OS_IDENTITY_API_VERSION=3
+ OS_IDENTITY_API_VERSION=3
+ echo -n 'Create Admin projects, users, and roles...'
Create Admin projects, users, and roles...+ openstack domain create --description 'An Example Domain' example
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | An Example Domain                |
| enabled     | True                             |
| id          | bc5da8e966b14434b7d020f0f54c5332 |
| name        | example                          |
| tags        | []                               |
+-------------+----------------------------------+
+ openstack project create --domain default --description 'Service Project' service
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | Service Project                  |
| domain_id   | default                          |
| enabled     | True                             |
| id          | 0c5f49cf64a14eaf9b3a8d0e8eae51a6 |
| is_domain   | False                            |
| name        | service                          |
| parent_id   | default                          |
| tags        | []                               |
+-------------+----------------------------------+
+ openstack project create --domain default --description 'Demo Project' demo
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | Demo Project                     |
| domain_id   | default                          |
| enabled     | True                             |
| id          | b8b3d3152574412ea3f2f1f7fba9bbc2 |
| is_domain   | False                            |
| name        | demo                             |
| parent_id   | default                          |
| tags        | []                               |
+-------------+----------------------------------+
+ openstack user create --domain default --password demopassword demo
+---------------------+----------------------------------+
| Field               | Value                            |
+---------------------+----------------------------------+
| domain_id           | default                          |
| enabled             | True                             |
| id                  | 06e238b2c679472ab8141bfb253ca439 |
| name                | demo                             |
| options             | {}                               |
| password_expires_at | None                             |
+---------------------+----------------------------------+
+ openstack role create user
+-----------+----------------------------------+
| Field     | Value                            |
+-----------+----------------------------------+
| domain_id | None                             |
| id        | e6f1b2ff4678414bbcb6272f98a5e791 |
| name      | user                             |
+-----------+----------------------------------+
+ openstack role add --project demo --user demo user
+ printf '\nVerify keystone Id Service...get a token by user id...\n'

Verify keystone Id Service...get a token by user id...
+ unset OS_AUTH_URL OS_PASSWORD
+ openstack --os-auth-url http://controller:5000/v3 --os-project-domain-name default --os-user-domain-name default --os-project-name admin --os-username admin --os-password adminpassword token issue
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Field      | Value                                                                                                                                                                                   |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| expires    | 2018-06-06T10:49:28+0000                                                                                                                                                                |
| id         | gAAAAABbF64oS7bNCcFhvdlt7eJaQhGPVK6Wj75kC80NHjL7s9tT5kD2vdagcIeA3esEpH2tDTxocjZx9H-hEDdADfVMvkSdbIT266k957dTwCzDEdw2styGPbjyPAP5HdDcDXsip8B8vRdG0e20lihEUao9z6u49lBQwP2EskBs3fqKbGxxYNs |
| project_id | f5b534e85cbf403385e9e2719dd9e279                                                                                                                                                        |
| user_id    | 74507f04a7074e72b1a8f6f277cc74d4                                                                                                                                                        |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
+ openstack --os-auth-url http://controller:5000/v3 --os-project-domain-name default --os-user-domain-name default --os-project-name demo --os-username demo --os-password demopassword token issue
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Field      | Value                                                                                                                                                                                   |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| expires    | 2018-06-06T10:49:29+0000                                                                                                                                                                |
| id         | gAAAAABbF64pvzQXTYDuAMexf1iy_sqmITWrzMuJ2iQDcrnfKhw5c7Xi6VmiwHXYR1PychziEHGYXVNqwXB_lq_dTXulozzj5vWzLyxWYbfMVSlpOdwmAwlKwjqBL_nEMEuGW_2jptuokLmxnUs0ynv180S8KB7G2fkWTY9m-aVDROKCC3lsyGc |
| project_id | b8b3d3152574412ea3f2f1f7fba9bbc2                                                                                                                                                        |
| user_id    | 06e238b2c679472ab8141bfb253ca439                                                                                                                                                        |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
