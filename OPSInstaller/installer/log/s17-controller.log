+ cd /home/openstack/OPSInstaller/controller
+ pwd
/home/openstack/OPSInstaller/controller
+ echo 'Run this script  as user.'
Run this script  as user.
+ echo -n 'Create nova user and endpoint...'
Create nova user and endpoint...+ source ./admin-openrc.sh
++ export OS_PROJECT_DOMAIN_NAME=default
++ OS_PROJECT_DOMAIN_NAME=default
++ export OS_USER_DOMAIN_NAME=default
++ OS_USER_DOMAIN_NAME=default
++ export OS_PROJECT_NAME=admin
++ OS_PROJECT_NAME=admin
++ export OS_USERNAME=admin
++ OS_USERNAME=admin
++ export OS_PASSWORD=adminpassword
++ OS_PASSWORD=adminpassword
++ export OS_AUTH_URL=http://controller:5000/v3
++ OS_AUTH_URL=http://controller:5000/v3
++ export OS_IDENTITY_API_VERSION=3
++ OS_IDENTITY_API_VERSION=3
++ export OS_IMAGE_API_VERSION=2
++ OS_IMAGE_API_VERSION=2
+ openstack user create --domain default --password NOVA_PASS nova
+---------------------+----------------------------------+
| Field               | Value                            |
+---------------------+----------------------------------+
| domain_id           | default                          |
| enabled             | True                             |
| id                  | deba3d56467d4b1cb3c659b93fd334f6 |
| name                | nova                             |
| options             | {}                               |
| password_expires_at | None                             |
+---------------------+----------------------------------+
+ openstack role add --project service --user nova admin
+ openstack service create --name nova --description 'OpenStack Compute' compute
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | OpenStack Compute                |
| enabled     | True                             |
| id          | 16ac3e9fe61b41e48d0f763350918e70 |
| name        | nova                             |
| type        | compute                          |
+-------------+----------------------------------+
+ openstack endpoint create --region RegionOne compute public http://controller:8774/v2.1/
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | 51673e02d8134bf1a9597511b3d21afa |
| interface    | public                           |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 16ac3e9fe61b41e48d0f763350918e70 |
| service_name | nova                             |
| service_type | compute                          |
| url          | http://controller:8774/v2.1/     |
+--------------+----------------------------------+
+ openstack endpoint create --region RegionOne compute internal http://controller:8774/v2.1/
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | f1836878c0cd47f6baf5657cfa5d7d01 |
| interface    | internal                         |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 16ac3e9fe61b41e48d0f763350918e70 |
| service_name | nova                             |
| service_type | compute                          |
| url          | http://controller:8774/v2.1/     |
+--------------+----------------------------------+
+ openstack endpoint create --region RegionOne compute admin http://controller:8774/v2.1/
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | b696de26e1f146b0ad59efa30e8d7bc4 |
| interface    | admin                            |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 16ac3e9fe61b41e48d0f763350918e70 |
| service_name | nova                             |
| service_type | compute                          |
| url          | http://controller:8774/v2.1/     |
+--------------+----------------------------------+
+ openstack user create --domain default --password PLACEMENT_PASS placement
+---------------------+----------------------------------+
| Field               | Value                            |
+---------------------+----------------------------------+
| domain_id           | default                          |
| enabled             | True                             |
| id                  | c031ed51d0ed4e1bb5aa158c107818a9 |
| name                | placement                        |
| options             | {}                               |
| password_expires_at | None                             |
+---------------------+----------------------------------+
+ openstack role add --project service --user placement admin
+ openstack service create --name placement --description 'Placement API' placement
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | Placement API                    |
| enabled     | True                             |
| id          | 41ba21ce1fc246d3816cdb07875b1c3e |
| name        | placement                        |
| type        | placement                        |
+-------------+----------------------------------+
+ openstack endpoint create --region RegionOne placement public http://controller:8778
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | c61815d684a8465bb32c5e5f2f7d6261 |
| interface    | public                           |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 41ba21ce1fc246d3816cdb07875b1c3e |
| service_name | placement                        |
| service_type | placement                        |
| url          | http://controller:8778           |
+--------------+----------------------------------+
+ openstack endpoint create --region RegionOne placement internal http://controller:8778
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | 67fbd67ff2804a59a37a292193eff887 |
| interface    | internal                         |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 41ba21ce1fc246d3816cdb07875b1c3e |
| service_name | placement                        |
| service_type | placement                        |
| url          | http://controller:8778           |
+--------------+----------------------------------+
+ openstack endpoint create --region RegionOne placement admin http://controller:8778
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | 92011cf76ddd4ae6bb91f97bb48997ca |
| interface    | admin                            |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 41ba21ce1fc246d3816cdb07875b1c3e |
| service_name | placement                        |
| service_type | placement                        |
| url          | http://controller:8778           |
+--------------+----------------------------------+
